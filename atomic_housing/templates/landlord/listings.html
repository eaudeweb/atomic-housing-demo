{% extends '_layout_landlord.html' %}
{% load utils %}

{% block page-title %}
  <div class="page-title">
    <h1>My Listings</h1>
    <div class="counter">{{ object_list|length }}</div>
    <div class="actions">
      <a class="btn primary" href="{% url 'listings_add' %}">Add Listing</a>
    </div>
  </div>
{% endblock %}

{% block content %}
  <ol class="listings-list">
    {% for listing in object_list %}
    <li>
      <div class="listing">
        <div class="listing-photo {% if not listing.cover_photo %}no-photo{% endif %}">
          <!-- <div class="muted">No photo</div>
          <a class="btn btn-success" data-modal=".modal-add-photo">Add photo</a> -->
          {% if listing.cover_photo %}
          <img src="{{ listing.cover_photo.name.url }}" width="100"/>
          {% endif %}
          <a href="{% url 'listings_photos' listing.pk %}">Photos</a>
        </div>
        <div class="listing-description">
          <div class="listing-title">
            <a href="{% url 'listings_edit' listing.pk %}" title="{{ listing.title }}">{{ listing.title }}</a>
          </div>
          <dl class="listing-stats">
            <dt>Status</dt>
            <dd><span class="badge {{ listing.get_status_display }}">{{ listing.get_status_display }}</span></dd>
            <dt>Views</dt>
            <dd>{{ listing.pk|add:12 }}</dd>
          </dl>
          <div class="listing-type">{{ listing.address }}</div>
          <div class="listing-published">{{ listing.updated|just_date }}</div>
        </div>
      </div>
    </li>
    {% endfor %}
  </ol>
{% endblock %}

{% block modal %}
  <div class="modal modal-add-photo" id="modalcontainer">
    <div class="modal-title">
      <h2>Add photos</h2>
    </div>
  </div>
{% endblock %}
